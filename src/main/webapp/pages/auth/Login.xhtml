<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:k="http://xmlns.jcp.org/jsf/passthrough">
  <h:head>
    <f:facet name="first">
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
      <meta name="apple-mobile-web-app-capable" content="yes" />

      <link rel="stylesheet" href="resources/css/login.css" />
      <link rel="stylesheet" href="resources/css/font-awesome.min.css" />
      <h:outputStylesheet
        name="primeflex/3.3.1/primeflex.css"
        library="webjars" />

      <style>
        * {
          box-sizing: border-box;
          /* color: rgb(226, 226, 226); */
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
            Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
        }
        .error-message {
          color: rgb(209, 92, 92);
          font-family: Arial, Helvetica, sans-serif;
          font-size: 16px;
          font-weight: 550;
        }

        .ui-button .ui-button-text {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 15px 15px;
          background-color: #3470e9;
          font-size: 18px;
        }

        .ui-button .ui-button-text:hover {
          background-color: #042aff;
        }

        .ui-button .ui-button-icon-left {
          display: none !important;
        }

        .ui-button .ui-button-text:before {
          margin-right: 5px;
          content: "\f2f6";
          font-family: "Font Awesome 5 Free";
        }

        #tv {
      box-sizing: border-box;
      padding: 3em 3.5em;
      width: 450px;
      background: #fff;
      position: relative;
      height: max-content;
      border-radius: 0% 0% 0% 0% / 0% 0% 0% 0% ;
      box-shadow: 20px 20px rgba(0,0,0,.15);
      transition: all .4s ease;
    }
    #tv:hover {
      border-radius: 0% 0% 50% 50% / 0% 0% 5% 5% ;
      box-shadow: 10px 10px rgba(0,0,0,.25);
    }
        
      </style>
    </f:facet>
  </h:head>
  <f:metadata>
    <f:event listener="#{userSessionBean.checkSession}" type="preRenderView" />
</f:metadata>
  <h:outputScript>
  $(document).ready(function() {
    // Set the duration (in milliseconds) for the messages to be displayed
    var displayDuration = 2000; // Change this value as needed (e.g., 3000 for 3 seconds)

    // Find the messages component by its ID
    var messages = $("#register");

    // Function to hide the messages after the specified duration
    function hideMessages() {
      messages.hide("fade");
    }

    // Hide the messages after the specified duration
    setTimeout(hideMessages, displayDuration);
  });
</h:outputScript>
  <h:body>
    <div>
      <!-- <p:messages id="register" showDetail="true" autoUpdate="true" /> -->
      <h:form>
        <p:growl id="messages" showDetail="true" />
        <div class="signinform">
          <div class="container">
            <!-- main content -->
            <div class="w3l-form-info">
              <div>
                <p:link outcome="/pages/admin/AdminDashboard.xhtml">
                  <img
                    src="resources/images/myyyy.png"
                    alt="Logo"
                    width="80%"
                    height="80%"
                /></p:link>
              </div>
              <div id="tv">
                <div class="input-group">
                  <span
                    ><i class="fas fa-envelope" aria-hidden="true"></i
                  ></span>
                  <h:inputText
                    id="mid"
                    style="color: black !important"
                    k:placeholder="Email"
                    value="#{loginForm.loginMember.email}"
                    required="true"
                    requiredMessage="*Email required" />
                  <!-- <h:message for="mid" styleClass="error-message" /> -->
                </div>
                <div class="input-group">
                  <span><i class="fas fa-key" aria-hidden="true"></i></span>
                  <h:inputSecret
                    id="password"
                    style="color: black !important"
                    k:placeholder="Password"
                    value="#{loginForm.loginMember.password}"
                    required="true"
                    requiredMessage="*Password required" />
                  <!-- <h:message for="password" styleClass="error-message" /> -->
                </div>
                <div class="form-row bottom">
                  <div class="form-check">
                    <h:selectBooleanCheckbox id="remember" />
                    <h:outputLabel for="remember" value="Remember me?" />
                  </div>
                  <a href="#url" class="forgot">Forgot password?</a>
                </div>
                <br />
                <p:commandButton
                  styleClass="btn btn-primary btn-block"
                  value="Login"
                  type="submit"
                  icon="fas fa-sign-in"
                  action="#{loginForm.doLogin()}"
                  update="messages @form"
                  ajax="false" />

                <p class="account">
                  Don't have an account?
                  <h:outputLink value="Register.xhtml">Register</h:outputLink>
                </p>
              </div>
            </div>
          </div>
          <div class="footer">
            <p>2023 Kimanyi SACCO login form | All Rights Reserved</p>
          </div>
        </div>
      </h:form>
    </div>
  </h:body>
  <script src="resources/js/fontawesome.js"></script>
</html>
